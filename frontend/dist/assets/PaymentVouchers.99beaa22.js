import{a as u,j as e,L as G,a7 as X,Y as j,Z as L,_ as Z,r as s,a6 as J,w as K,$ as W}from"./vendor.c17f1326.js";import{l as Q,u as V,F as ee,P as te,N as ae,a as re}from"./index.c3bf1e78.js";import{u as le,a as se,b as ue,c as ne}from"./paymentVouchersApiSlice.fb949114.js";import{s as R,u as oe}from"./useScroll.40b3b3cf.js";import{F as P,D as M,u as ce}from"./index.145ede7a.js";import{b as ie}from"./index.esm.a6b2d145.js";import{p as de,f as me}from"./utils.7f2f06b2.js";import{d as _}from"./dayjs.min.c3329109.js";import{i as p,l as w}from"./constants.ffd6e56c.js";import{S as xe}from"./paymentVoucher-alt.b53ea110.js";import{F as N}from"./FormInput.53f96b8d.js";import{m as S,c as be,a as he,A as pe}from"./animationOptions.7780460c.js";import{D as z}from"./DataFetchingErrorMessage.f8995f8e.js";const fe=u("tr",{className:"border-y border-y-black",children:[de.map(n=>e("th",{scope:"col",className:"max-w-[100px] border-x border-x-black p-1 text-center",children:n},n)),e("th",{scope:"col",className:"max-w-[100px] border-x border-x-black p-1 text-center",children:"\u0645"})]}),ge=({basicOptions:n,extraOptions:d})=>{const{item:a,index:l}=n,{handleRemoving:x,isDeleting:c,setId:r,setIsOpen:o}=d;return u("tr",{className:`${l%2===0?"bg-white":"bg-gray-100"} border-b border-b-black`,children:[e("th",{scope:"row",className:"border-x border-x-black p-1 text-center text-gray-900",children:e("form",{className:"m-auto max-w-[150px]",onSubmit:m=>x(m,a==null?void 0:a.id),children:e(P,{bgColor:["bg-red-600","bg-red-700","bg-red-800"],icon:e(ie,{size:20}),isLoading:c})})}),e("th",{scope:"row",className:"border-x border-x-black p-1 text-center text-gray-900",children:e(G,{to:`/paymentVouchers/${a==null?void 0:a.id}`,className:"inline-flex items-center rounded border border-transparent bg-orange-800 px-2 py-2 text-xs font-bold text-white transition-all duration-300 ease-in-out\r hover:border-orange-800 hover:bg-white hover:text-orange-800",children:"\u0633\u0646\u062F \u0627\u0644\u0635\u0631\u0641"})}),e("th",{scope:"row",className:"border-x border-x-black p-1 text-center text-gray-900",children:e("button",{className:"flex w-full items-center justify-center rounded border border-transparent bg-blue-800 px-3 py-2.5 text-xs font-bold text-white transition-all duration-300 ease-in-out\r hover:border-blue-800 hover:bg-white hover:text-blue-800",onClick:()=>{r==null||r(a==null?void 0:a.id),o==null||o(!0)},children:e(X,{size:20})})}),e("th",{scope:"row",className:"border-x border-x-black p-1 text-center text-gray-900",children:a==null?void 0:a.amount}),e("th",{scope:"row",className:"border-x border-x-black p-1 text-center text-gray-900",children:a.customer_name}),e("th",{scope:"row",className:"border-x border-x-black p-1 text-center text-gray-900",children:_(a==null?void 0:a.payment_date).format("DD/MM/YYYY")}),e("th",{scope:"row",className:"text-gray-90  border-x border-x-black p-1 text-center",children:me(a.ID)})]},a==null?void 0:a.id)},ye=n=>{let d={totals:0};return n.map(a=>{d.totals+=(a==null?void 0:a.amount)||0}),d},we=["\u0627\u0644\u0642\u064A\u0645\u0629","\u0627\u0644\u0625\u062C\u0645\u0627\u0644\u0649"],Ne=({paymentVouchers:n})=>{const{totals:d}=ye(n),a=[["\u0633\u0646\u062F\u0627\u062A \u0627\u0644\u0635\u0631\u0641",d.toFixed(2)]],l=e("tr",{className:"border-b border-b-teal-500",children:we.map(c=>e("th",{scope:"col",className:"border-x border-x-teal-500 py-3 px-3 text-center",children:c},c))}),x=(c,r)=>u("tr",{className:`${r%2===0?"bg-white":"bg-red-100"} border-b border-b-teal-500`,children:[e("th",{scope:"row",className:"whitespace-nowrap  border-x border-x-teal-500  p-2  text-center text-gray-900",children:c[1]}),e("th",{scope:"row",className:"whitespace-nowrap  border-x border-x-teal-500  p-2  text-center text-gray-900",children:c[0]})]},c[0]);return u("div",{className:"my-5 rounded-md bg-red-700 p-4 ",children:[e("h4",{className:"mb-5 p-3 text-center text-2xl font-bold text-white underline decoration-sky-500 decoration-wavy decoration-2 underline-offset-8",children:"\u0625\u062C\u0645\u0627\u0644\u064A\u0627\u062A \u0627\u0644\u0635\u0641\u062D\u0629"}),e("div",{className:"my-5  rounded",children:u("table",{className:"w-full text-sm font-bold text-gray-500 ",children:[e("thead",{className:"bg-red-100 uppercase text-gray-900",children:l}),e("tbody",{children:a.map((c,r)=>x(c,r))})]})})]})},ve=({setSearchQuery:n,searchQuery:d,setIsFilterOpen:a,isFilterOpen:l,tableRows:x,setTableRows:c})=>{const[r,o]=j(),m=r.get("page"),{year:v,month:f,day:i,customerName:g}=d;let F=[];for(let t=2010;t<=2060;t++)F.push(t);let A=[];for(let t=1;t<=30;t++)A.push(t);let h=[];for(let t=1;t<=31;t++)h.push(t);let y=[];for(let t=10;t<=300;t+=10)y.push(t);return u("div",{id:"filters",className:`${l?"translate-x-0":"-translate-x-60"} duration-350 absolute left-0 top-0 flex h-screen w-60 flex-wrap items-start justify-center gap-4  overflow-x-hidden overflow-y-scroll bg-slate-50 px-4 py-8 text-xs shadow-md transition-all ease-in-out scrollbar-thin scrollbar-track-transparent scrollbar-thumb-gray-400 scrollbar-corner-slate-700 scrollbar-track-rounded-full scrollbar-w-0`,children:[e("button",{className:"absolute top-2 right-2 inline-flex items-center text-xs font-bold text-white sm:text-sm",onClick:()=>a(!l),type:"button",children:e(L,{className:"text-red-700",size:30})}),u("form",{className:"mx-auto my-4  flex basis-full flex-col  items-center justify-center gap-4 font-semibold",children:[u("div",{className:"flex flex-col items-center justify-center gap-2",children:[e("label",{className:"w-full rounded bg-red-700 p-2 text-white",htmlFor:"year",children:"\u0627\u0644\u0633\u0646\u0629"}),u("select",{name:"year",id:"year",className:p.default,value:v,onChange:t=>{m&&+m>1&&o({page:"1"}),n({...d,year:t.target.value})},children:[e("option",{value:"",children:"\u0643\u0644 \u0627\u0644\u0633\u0646\u0648\u0627\u062A"}),F.map(t=>e("option",{value:t,children:t},t))]})]}),u("div",{className:"flex flex-col items-center justify-center gap-2",children:[e("label",{className:"w-full rounded bg-red-700 p-2 text-white",htmlFor:"month",children:"\u0627\u0644\u0634\u0647\u0631"}),u("select",{name:"month",id:"month",className:p.default,value:f,onChange:t=>{m&&+m>1&&o({page:"1"}),n({...d,month:t.target.value})},children:[e("option",{value:"",children:"\u0643\u0644 \u0627\u0644\u0634\u0647\u0648\u0631"}),A.map(t=>e("option",{value:t,children:t},t))]})]}),u("div",{className:"flex flex-col items-center justify-center gap-2",children:[e("label",{className:"w-full rounded bg-red-700 p-2 text-white",htmlFor:"day",children:"\u0627\u0644\u064A\u0648\u0645"}),u("select",{name:"day",id:"day",className:p.default,value:i,onChange:t=>{m&&+m>1&&o({page:"1"}),n({...d,day:t.target.value})},children:[e("option",{value:"",children:"\u0643\u0644 \u0627\u0644\u0627\u064A\u0627\u0645"}),h.map(t=>e("option",{value:t,children:t},t))]})]}),u("div",{className:"flex flex-col items-center justify-center gap-2",children:[e("label",{className:"w-full rounded bg-red-700 p-2 text-white",htmlFor:"tableRows",children:"\u0639\u062F\u062F \u0635\u0641\u0648\u0641 \u0627\u0644\u062C\u062F\u0648\u0644"}),e("select",{name:"tableRows",id:"tableRows",className:p.default,value:x,onChange:t=>{m&&+m>1&&o({page:"1"}),c(+t.target.value)},children:y.map(t=>e("option",{value:t,children:t},t))})]}),u("div",{className:"flex flex-col items-center justify-center gap-2",children:[e("label",{className:"w-full rounded bg-red-700 p-2 text-white",htmlFor:"customerName",children:"Customer Name"}),e("input",{type:"text",name:"customerName",id:"customerName",className:p.default,value:g,placeholder:"Customer Name",onChange:t=>{m&&+m>1&&o({page:"1"}),n({...d,customerName:t.target.value})}})]})]})]})},Fe=({searchQuery:n,count:d,setIsFilterOpen:a,isFilterOpen:l})=>{const{year:x,month:c,day:r,customerName:o}=n;return u("h3",{id:"filterHeader",className:"relative flex basis-full flex-row-reverse flex-wrap items-center justify-center rounded  bg-red-700 p-3 text-center font-bold text-white shadow",children:[u("button",{id:"openFilters",className:"absolute top-2 right-2 flex items-center justify-center rounded bg-slate-50 p-2 text-xs font-semibold text-gray-600 shadow sm:text-sm",onClick:()=>a(!l),type:"button",children:[e(Z,{className:"mr-1",size:25}),l?"\u0625\u063A\u0644\u0627\u0642 \u0627\u0644\u0641\u0644\u062A\u0631\u0629":"\u0641\u062A\u062D \u0627\u0644\u0641\u0644\u062A\u0631\u0629"]}),e("p",{className:"mb-5 basis-full text-2xl underline decoration-sky-500 decoration-wavy decoration-2 underline-offset-8",children:"\u0641\u0644\u062A\u0640\u0640\u0631\u0629 \u0627\u0644\u0633\u0646\u0640\u0640\u0640\u062F\u0627\u062A"}),e("span",{children:" \u0627\u0644\u0633\u0646\u0640\u0640\u0640\u062F\u0627\u062A  \u0627\u0644\u0645\u062D\u0641\u0648\u0638\u0629"}),!c&&!x&&e("span",{className:"mx-1 rounded-md bg-blue-500 p-1 text-white",children:" \u0627\u0644\u0643\u0644\u064A\u0629 "}),c&&e("span",{className:"mx-1 rounded-md bg-rose-500 p-1 text-white",children:" \u0639\u0646 \u0634\u0647\u0631 "+c}),r&&e("span",{className:"mx-1 rounded-md bg-rose-500 p-1 text-white",children:" \u064A\u0648\u0645 "+r}),x&&e("span",{className:"mx-1 rounded-md bg-amber-500 p-1 text-white",children:" \u0633\u0646\u0629 "+x}),o&&e("span",{className:"mx-1 rounded-md bg-pink-500 p-1 text-white",children:" Customer Name:- "+o}),u("span",{children:["(",d,")"]})]})},Ae=n=>s.exports.createElement("svg",{id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512",xmlSpace:"preserve",role:"img",...n},s.exports.createElement("circle",{style:{fill:"#FF8E31"},cx:256,cy:256,r:256}),s.exports.createElement("path",{style:{fill:"#ED7425"},d:"M389.417,168.707c-0.038-0.074-0.113-0.148-0.182-0.22c-0.077-0.074-0.148-0.143-0.22-0.182 c-2.596-2.486-5.96-3.73-9.288-3.73H132.283c-3.438,0-6.876,1.316-9.508,3.912c-2.596,2.634-3.914,6.072-3.914,9.508v156.017 c0,3.331,1.242,6.692,3.694,9.285l0.443,0.443L289.06,509.801c114.929-14.828,205.906-105.805,220.746-220.726L389.417,168.707z"}),s.exports.createElement("g",null,s.exports.createElement("path",{style:{fill:"#CEE2F2"},d:"M379.712,164.575c3.428,0,6.881,1.308,9.505,3.93c2.604,2.619,3.922,6.065,3.922,9.505 l-0.003,155.983c0.003,3.433-1.318,6.876-3.919,9.516c-2.629,2.614-6.077,3.919-9.505,3.919H132.296 c-3.436,0-6.868-1.308-9.505-3.919c-2.609-2.639-3.93-6.083-3.93-9.516l0.005-155.978c-0.005-3.446,1.318-6.889,3.927-9.518 c2.634-2.614,6.067-3.919,9.498-3.922H379.712z"}),s.exports.createElement("g",null,s.exports.createElement("rect",{x:153.019,y:306.867,style:{fill:"#03628A"},width:42.877,height:5.885}),s.exports.createElement("rect",{x:207.386,y:306.867,style:{fill:"#03628A"},width:42.88,height:5.885}),s.exports.createElement("rect",{x:261.734,y:306.867,style:{fill:"#03628A"},width:42.88,height:5.885}),s.exports.createElement("rect",{x:316.109,y:306.867,style:{fill:"#03628A"},width:42.872,height:5.885})),s.exports.createElement("rect",{x:153.019,y:255.949,style:{fill:"#FFFFFF"},width:205.952,height:23.544}),s.exports.createElement("g",null,s.exports.createElement("rect",{x:254.413,y:265.498,style:{fill:"#03628A"},width:11.771,height:4.426}),s.exports.createElement("rect",{x:272.794,y:265.498,style:{fill:"#03628A"},width:35.315,height:4.426}),s.exports.createElement("rect",{x:314.726,y:265.498,style:{fill:"#03628A"},width:35.313,height:4.426}),s.exports.createElement("rect",{x:118.861,y:197.837,style:{fill:"#03628A"},width:274.278,height:41.838})))),De=({id:n,setIsOpen:d})=>{const a={name:"",bank:"",referenceNumber:"",being:"",amount:0,paymentDate:""},{data:l,isLoading:x,error:c}=le({id:n}),[r,o]=s.exports.useState(a),[m,{isLoading:v}]=se(),f=async i=>{i.preventDefault();const g={id:n,customer_name:r.name,bank:r.bank,reference_number:r.referenceNumber,being:r.being,amount:r.amount,payment_date:r.paymentDate};await m(g)};return s.exports.useEffect(()=>{l&&o({name:l.customer_name,bank:(l==null?void 0:l.bank)||"",referenceNumber:(l==null?void 0:l.reference_number)||"",being:(l==null?void 0:l.being)||"",amount:l.amount,paymentDate:l!=null&&l.payment_date?_(l==null?void 0:l.payment_date).format("YYYY-MM-DD"):""})},[l]),s.exports.useEffect(()=>{const i=window.scrollY;window.scrollBy(0,-i)},[]),c?e(z,{}):!l||x?e(M,{}):u("div",{className:"fixed inset-0 z-50  h-screen w-full overflow-y-auto overflow-x-hidden bg-black/75 scrollbar-thin scrollbar-track-transparent  scrollbar-thumb-gray-400 scrollbar-track-rounded-full md:inset-0",children:[u(S.button,{...be,className:"fixed top-5 right-[5%] inline-flex items-center rounded border border-transparent bg-red-800 px-2  py-2 text-xs font-bold text-white shadow transition-all duration-300 ease-in-out hover:border-red-800\r hover:bg-white hover:text-red-800 sm:px-3 sm:text-sm",onClick:()=>d(!1),type:"button",children:[e(L,{className:"mr-1",size:20}),"\u0625\u063A\u0644\u0627\u0642"]}),s.exports.createElement(S.div,{...he,key:"modal",className:"mx-auto my-5 w-full max-w-5xl rounded bg-slate-50 p-6 shadow-lg shadow-black/30"},u("h3",{className:"mb-10 flex items-center justify-center rounded bg-red-800 px-2 py-4 text-center text-xl font-bold text-white shadow ",children:[e(xe,{className:"mr-1 h-16 w-16 drop-shadow"}),e("span",{children:" \u062A\u0639\u062F\u064A\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0633\u0646\u062F"})]}),u("form",{onSubmit:f,children:[e("p",{className:"my-4 rounded bg-red-800 p-2 text-lg font-bold text-white",children:"[ \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0633\u0646\u062F \u0627\u0644\u062D\u0627\u0644\u064A\u0629 ]"}),u("div",{className:"mb-10 flex flex-wrap items-center justify-center gap-4 px-5 py-5 font-semibold",children:[e(N,{label:"Customer Name",name:"customerName",labeClassNames:w.default,className:p.default,type:"text",value:r.name,onChange:i=>o({...r,name:i.target.value}),required:!0}),e(N,{label:"Amount",name:"amount",labeClassNames:w.default,className:p.default,type:"number",value:r.amount,onChange:i=>o({...r,amount:+i.target.value}),min:0,step:.01,required:!0}),e(N,{label:"Bank",name:"bank",labeClassNames:w.default,className:p.default,type:"text",value:r.bank,onChange:i=>o({...r,bank:i.target.value})}),e(N,{label:"Reference Number",name:"referenceNumber",labeClassNames:w.default,className:p.default,type:"text",value:r.referenceNumber,onChange:i=>o({...r,referenceNumber:i.target.value})}),e(N,{label:"Being",name:"being",labeClassNames:w.default,className:p.default,type:"text",value:r.being,onChange:i=>o({...r,being:i.target.value})}),e(N,{label:"Voucher Date",name:"paymentDate",labeClassNames:w.default,className:p.default,type:"date",value:r.paymentDate,onChange:i=>o({...r,paymentDate:i.target.value}),required:!0})]}),e(P,{text:{default:"\u062D\u0641\u0638 \u0627\u0644\u062A\u0639\u062F\u064A\u0644\u0627\u062A",loading:"\u062C\u0627\u0631\u0649 \u0627\u0644\u062D\u0641\u0638"},isLoading:v,icon:e(J,{className:"ml-1",size:25})})]}))]})};function He(){const[n,d]=s.exports.useState({day:"",year:"",month:"",customerName:""}),{year:a,month:l,day:x,customerName:c}=n,r=s.exports.useDeferredValue(c),o=s.exports.useRef(!1),m=s.exports.useRef(null),{onDownload:v}=Q.useDownloadExcel({currentTableRef:m.current,filename:"PaymentVouchers table",sheet:"PaymentVouchers"}),[f,i]=s.exports.useState(50),[g]=j(),F=g.get("page")?+g.get("page"):1;let A={query:{day:+x,month:+l,year:+a,customerName:r},option:{limit:f,page:F}};const{data:h,isLoading:y,isFetching:t,isSuccess:C,error:T}=ue(A),b=h!=null&&h.docs?h.docs:[],[Y,{isLoading:H}]=ne(),[B,E]=s.exports.useState(!1),[D,k]=s.exports.useState(!1),[O,U]=s.exports.useState(""),I=s.exports.useCallback(async($,q)=>{$.preventDefault(),await Y(q)},[]);return s.exports.useEffect(()=>{o.current&&C&&!t&&!y?R():o.current=!0},[F,C,t,y,R]),oe("filterHeader"),ce("\u0633\u0646\u0640\u0640\u0640\u062F\u0627\u062A \u0627\u0644\u0635\u0631\u0641"),V({setIsFilterOpen:k,isFilterOpen:D}),T?e(z,{}):!h||y?e(M,{}):u("main",{className:"w-full",children:[u("h2",{className:"my-4 mb-10 flex items-center justify-center rounded bg-red-700 px-2 py-4 text-3xl font-bold text-white shadow",children:[e("span",{className:"mr-2 flex items-center justify-center",children:e(Ae,{className:"mr-1 h-20 w-20 drop-shadow"})}),"\u0633\u0646\u0640\u0640\u0640\u062F\u0627\u062A \u0627\u0644\u0635\u0631\u0641"]}),e(Fe,{searchQuery:n,count:h!=null&&h.totalDocs?h.totalDocs:0,setIsFilterOpen:k,isFilterOpen:D}),e(ve,{searchQuery:n,setSearchQuery:d,setIsFilterOpen:k,isFilterOpen:D,tableRows:f,setTableRows:i}),!t&&(b==null?void 0:b.length)!==0&&e(Ne,{paymentVouchers:b}),t&&e(ee,{isFetching:t}),(b==null?void 0:b.length)>0&&u(K,{children:[u("button",{className:"mx-auto my-5 flex items-center justify-center gap-1 rounded border bg-green-200 px-2 py-2 text-xs font-bold text-green-800 shadow transition-all duration-300 ease-in-out hover:border-green-800 hover:bg-white\r hover:text-green-800 sm:px-3 sm:text-sm",onClick:v,children:[e(W,{size:20}),e("span",{children:"Export excel"})]}),e(te,{tableRow:ge,tableHeader:fe,tableBodyData:b,options:h,handleRemoving:I,setIsOpen:E,setId:U,isDeleting:H,ref:m})]}),!a&&!l&&!x&&!r&&(b==null?void 0:b.length)===0&&!t&&e(ae,{customMsg:["\u0633\u0646\u062F\u0627\u062A","\u0627\u0644\u0633\u0646\u062F\u0627\u062A"]}),(a||l||x||r)&&(b==null?void 0:b.length)===0&&!t&&e(re,{}),e(pe,{initial:!1,children:B&&e(De,{setIsOpen:E,id:O})})]})}export{He as default};
