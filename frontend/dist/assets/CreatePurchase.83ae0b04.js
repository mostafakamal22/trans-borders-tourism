import{r as b,a as i,j as u,a8 as w,a9 as F,a6 as D}from"./vendor.c17f1326.js";import{d as S,S as P}from"./purchase-alt.b38018c5.js";import{u as T,F as j}from"./index.99e40694.js";import{l as r,i as n}from"./constants.ffd6e56c.js";import{F as o}from"./FormInput.53f96b8d.js";import{u as _}from"./useScroll.40b3b3cf.js";function M(){const[c,d]=b.exports.useState({date:"",total:0}),[l,m]=b.exports.useState([{name:"",description:"",supplier:"",reference_number:"",cost:0,tax:0,total:0}]),[x,g]=b.exports.useState(1),[y,{isSuccess:N,isLoading:C}]=S(),A=a=>{if(a<0&&x===1)return;g(x+a);const t=a>0?[...l,{name:"",description:"",supplier:"",reference_number:"",cost:0,tax:0,total:0}]:l.splice(0,l.length-1);m(t);const s=t.reduce((e,p)=>e+p.total,0);d({...c,total:s})},v=async a=>{a.preventDefault();const t={purchaseTypes:[...l],total:c.total,purchaseDate:c.date};await y(t)};return b.exports.useEffect(()=>{N&&(d({date:"",total:0}),m([{name:"",description:"",supplier:"",reference_number:"",cost:0,tax:0,total:0}]))},[N]),_("createPurchase"),T("\u0625\u0636\u0627\u0641\u0629 \u0645\u0634\u062A\u0631\u0649 \u062C\u062F\u064A\u062F\u0629"),i("section",{id:"createPurchase",className:"w-full",children:[i("h3",{className:"mb-10 flex items-center justify-center rounded bg-red-800 px-2 py-4 text-center text-xl font-bold text-white shadow ",children:[u(P,{className:"mr-2 h-16 w-16 drop-shadow"}),u("span",{children:"\u0625\u0636\u0627\u0641\u0629 \u0645\u0634\u062A\u0631\u0649 \u062C\u062F\u064A\u062F\u0629"})]}),i("form",{onSubmit:v,children:[u("p",{className:"my-4 rounded bg-red-800 p-2 text-lg font-bold text-white",children:"[ \u062A\u0641\u0640\u0640\u0627\u0635\u064A\u0644 \u0646\u0648\u0639 \u0627\u0644\u0645\u0634\u062A\u0631\u0649 ]"}),l.map((a,t)=>i("div",{className:"flex flex-wrap items-center justify-center gap-4 px-5 py-5  font-semibold",children:[u(o,{label:"Supplier",name:"itemSupplier",labeClassNames:r.default,className:n.default,type:"text",value:a.supplier,onChange:s=>{const e=[...l];e[t].supplier=s.target.value,m(e)}}),u(o,{label:"Reference Number",name:"itemReferenceNumber",labeClassNames:r.default,className:n.default,type:"text",value:a.reference_number,onChange:s=>{const e=[...l];e[t].reference_number=s.target.value,m(e)}}),u(o,{label:"\u0634\u0631\u062D \u0627\u0644\u0645\u0634\u062A\u0631\u064A",name:"itemDescription",labeClassNames:r.default,className:n.default,type:"text",value:a.description,onChange:s=>{const e=[...l];e[t].description=s.target.value,m(e)}}),u(o,{label:"\u0646\u0648\u0639 \u0627\u0644\u0645\u0634\u062A\u0631\u064A",name:"itemName",labeClassNames:r.default,className:n.default,type:"text",value:a.name,onChange:s=>{const e=[...l];e[t].name=s.target.value,m(e)}}),u(o,{label:"\u0627\u0644\u0645\u0628\u0644\u063A \u0642\u0628\u0644 \u0627\u0644\u0636\u0631\u064A\u0628\u0629",name:"itemTotal",labeClassNames:r.default,className:n.default,type:"number",value:a.cost,onChange:s=>{const e=[...l];e[t].cost=+s.target.value,e[t].total=+s.target.value+e[t].tax,m(e);const p=l.reduce((f,h)=>f+h.total,0);d({...c,total:+p.toFixed(2)})},min:0,step:.01}),u(o,{label:"\u0627\u0644\u0636\u0631\u064A\u0628\u0629",name:"itemTotal",labeClassNames:r.default,className:n.default,type:"number",value:a.tax,onChange:s=>{const e=[...l];e[t].tax=+s.target.value,e[t].total=e[t].cost+ +s.target.value,m(e);const p=l.reduce((f,h)=>f+h.total,0);d({...c,total:+p.toFixed(2)})},min:0,step:.01}),u(o,{label:"\u0627\u0644\u0627\u062C\u0645\u0627\u0644\u0649 \u0628\u0639\u062F \u0627\u0644\u0636\u0631\u064A\u0628\u0629",name:"itemTotal",labeClassNames:r.default,className:`${n.default} bg-slate-200`,type:"number",value:a.total,disabled:!0,min:0,step:.01})]},t)),i("div",{className:"flex justify-around",children:[i("button",{className:"my-5 flex items-center rounded border bg-blue-800 px-2 py-2 text-xs font-bold text-white shadow transition-all duration-300 ease-in-out hover:border-blue-800\r hover:bg-white hover:text-blue-800 sm:px-3 sm:text-sm",onClick:()=>A(1),type:"button",children:[u(w,{className:"mr-1",size:20}),"\u0625\u0636\u0627\u0641\u0629 \u0646\u0648\u0639 \u062C\u062F\u064A\u062F"]}),i("button",{className:"my-5 flex items-center rounded border bg-red-800 px-2 py-2 text-xs font-bold text-white shadow transition-all duration-300 ease-in-out hover:border-red-800\r hover:bg-white hover:text-red-800 sm:px-3 sm:text-sm",onClick:()=>A(-1),type:"button",children:[u(F,{className:"mr-1",size:20}),"\u062D\u0630\u0641 \u0646\u0648\u0639 \u0645\u0634\u062A\u0631\u0649"]})]}),u("p",{className:"my-4 rounded bg-red-800 p-2 text-lg font-bold text-white",children:"[ \u062A\u0641\u0640\u0640\u0627\u0635\u064A\u0644 \u0627\u0644\u0645\u0634\u062A\u0631\u0649 ]"}),i("div",{className:"flex flex-wrap items-center justify-center gap-4 px-5 py-5 font-semibold",children:[u(o,{label:"\u0627\u0644\u0645\u0628\u0644\u063A \u0627\u0644\u0643\u0640\u0640\u0644\u0649",name:"totalPayment",labeClassNames:r.default,className:`${n.default} bg-slate-200`,type:"number",value:c.total,disabled:!0,min:0,step:.01,required:!0}),u(o,{label:"\u062A\u0640\u0640\u0627\u0631\u064A\u0640\u062E \u0627\u0644\u0645\u0634\u062A\u0631\u0649",name:"paymentDate",labeClassNames:r.default,className:n.default,type:"date",value:c.date,onChange:a=>d({...c,date:a.target.value}),required:!0})]}),u(j,{text:{default:"\u062D\u0641\u0638 \u0627\u0644\u0645\u0634\u062A\u0631\u0649",loading:"\u062C\u0627\u0631\u0649 \u0627\u0644\u062D\u0641\u0638"},isLoading:C,icon:u(D,{className:"mr-1",size:25})})]})]})}export{M as default};
