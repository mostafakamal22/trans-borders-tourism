import{r as n,j as e,a as c,Z as $,a6 as ue,Y as T,_ as ne,a7 as oe,w as de,$ as ce}from"./vendor.c17f1326.js";import{l as me,u as pe,F as ie,P as he,N as xe,a as be}from"./index.c3bf1e78.js";import{d as q}from"./dayjs.min.c3329109.js";import{S as fe}from"./ticket-alt.07d3c465.js";import{F as w}from"./FormInput.53f96b8d.js";import{D as G,F as X,u as ge}from"./index.145ede7a.js";import{b as ye,c as ve,d as Ne,e as we}from"./ticketsApiSlice.63e8ff38.js";import{t as F,c as Fe}from"./constants.f1b6c079.js";import{l as y,i}from"./constants.ffd6e56c.js";import{p as R}from"./constants.7e1aa417.js";import{m as O,c as Ae,a as Ce,A as De}from"./animationOptions.7780460c.js";import{D as Z}from"./DataFetchingErrorMessage.f8995f8e.js";import{c as Me}from"./invoiceApiSlice.048139ff.js";import{s as V,u as Ee}from"./useScroll.40b3b3cf.js";import{b as Se}from"./index.esm.a6b2d145.js";const Re=o=>n.exports.createElement("svg",{height:"800px",width:"800px",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512",xmlSpace:"preserve",role:"img",...o},n.exports.createElement("path",{style:{fill:"#0E4151"},d:"M504.017,146.545c-22.597,0-40.981-18.384-40.981-40.981c0-4.409-3.574-7.983-7.983-7.983H56.948 c-4.409,0-7.983,3.574-7.983,7.983c0,22.597-18.384,40.981-40.981,40.981c-4.409,0-7.983,3.574-7.983,7.983v202.943 c0,4.409,3.574,7.983,7.983,7.983c22.597,0,40.981,18.384,40.981,40.981c0,4.409,3.574,7.983,7.983,7.983h398.104 c4.409,0,7.983-3.574,7.983-7.983c0-22.597,18.384-40.981,40.981-40.981c4.409,0,7.983-3.574,7.983-7.983V154.529 C512,150.12,508.426,146.545,504.017,146.545z"}),n.exports.createElement("path",{style:{fill:"#144F66"},d:"M256,97.581H56.948c-4.409,0-7.983,3.574-7.983,7.983c0,22.597-18.384,40.981-40.981,40.981 c-4.409,0-7.983,3.574-7.983,7.983v202.943c0,4.409,3.574,7.983,7.983,7.983c22.597,0,40.981,18.384,40.981,40.981 c0,4.409,3.574,7.983,7.983,7.983H256V97.581z"}),n.exports.createElement("g",null,n.exports.createElement("path",{style:{fill:"#FFFFFF"},d:"M128.566,214.613v82.776c0,5.879,4.766,10.645,10.644,10.645s10.645-4.766,10.645-10.645v-82.776 c0-5.879-4.766-10.644-10.645-10.644C133.332,203.968,128.566,208.734,128.566,214.613z"}),n.exports.createElement("path",{style:{fill:"#FFFFFF"},d:"M90.293,225.257h13.078c5.879,0,10.644-4.766,10.644-10.644s-4.766-10.644-10.644-10.644H55.926 c-5.879,0-10.644,4.766-10.644,10.644s4.766,10.644,10.644,10.644h13.078v72.131c0,5.879,4.766,10.645,10.644,10.645 c5.879,0,10.644-4.766,10.644-10.645C90.293,297.388,90.293,225.257,90.293,225.257z"})),n.exports.createElement("g",null,n.exports.createElement("path",{style:{fill:"#DEE1E7"},d:"M456.074,203.968h-47.445c-5.879,0-10.644,4.766-10.644,10.644s4.766,10.644,10.644,10.644h13.078 v72.131c0,5.879,4.766,10.645,10.645,10.645c5.879,0,10.644-4.766,10.644-10.645v-72.131h13.078 c5.879,0,10.644-4.766,10.644-10.644S461.953,203.968,456.074,203.968z"}),n.exports.createElement("path",{style:{fill:"#DEE1E7"},d:"M372.789,225.257c5.879,0,10.645-4.766,10.645-10.644s-4.766-10.644-10.645-10.644h-34.195 c-9.279,0-16.828,7.549-16.828,16.828v70.409c0,9.279,7.549,16.828,16.828,16.828h34.195c5.879,0,10.645-4.766,10.645-10.645 s-4.766-10.644-10.645-10.644h-29.733v-20.099h17.62c5.879,0,10.644-4.766,10.644-10.644c0-5.879-4.766-10.645-10.644-10.645 h-17.62v-20.099H372.789z"})),n.exports.createElement("path",{style:{fill:"#FFFFFF"},d:"M197.125,225.257c5.263,0,9.545,4.281,9.545,9.545c0,5.879,4.766,10.644,10.644,10.644 s10.644-4.766,10.644-10.644c0-17.001-13.833-30.834-30.834-30.834s-30.834,13.833-30.834,30.834v42.397 c0,17.001,13.833,30.834,30.834,30.834s30.834-13.833,30.834-30.834c0-5.879-4.766-10.644-10.644-10.644 s-10.644,4.766-10.644,10.644c0,5.263-4.281,9.545-9.545,9.545c-5.264,0-9.545-4.281-9.545-9.545v-42.397 C187.581,229.539,191.863,225.257,197.125,225.257z"}),n.exports.createElement("path",{style:{fill:"#DEE1E7"},d:"M305.33,217.641v-3.028c0-5.879-4.766-10.644-10.644-10.644c-5.879,0-10.645,4.766-10.645,10.644 v3.028c0,11.226-7.855,20.644-18.355,23.067v-26.095c0-5.879-4.766-10.644-10.644-10.644c-5.879,0-10.644,4.766-10.644,10.644 v82.776c0,5.879,4.766,10.645,10.644,10.645c5.879,0,10.644-4.766,10.644-10.645v-26.095c10.501,2.422,18.355,11.841,18.355,23.067 v3.028c0,5.879,4.766,10.645,10.645,10.645c5.879,0,10.644-4.766,10.644-10.645v-3.028c0-16.214-8.627-30.448-21.531-38.36 C296.702,248.088,305.33,233.855,305.33,217.641z"}),n.exports.createElement("path",{style:{fill:"#FFFFFF"},d:"M255.996,204.011c-0.315-0.028-0.633-0.043-0.955-0.043c-5.879,0-10.645,4.766-10.645,10.644v82.776 c0,5.879,4.766,10.645,10.645,10.645c0.324,0,0.643-0.015,0.959-0.043L255.996,204.011z"}),n.exports.createElement("path",{style:{fill:"#39B7B6"},d:"M99.852,167.651h312.298c5.879,0,10.645-4.766,10.645-10.644s-4.766-10.644-10.645-10.644H99.852 c-5.879,0-10.644,4.766-10.644,10.644S93.973,167.651,99.852,167.651z"}),n.exports.createElement("path",{style:{fill:"#66CBC4"},d:"M99.852,167.651H256v-21.289H99.852c-5.879,0-10.644,4.766-10.644,10.644 S93.973,167.651,99.852,167.651z"}),n.exports.createElement("path",{style:{fill:"#39B7B6"},d:"M99.852,365.639h312.298c5.879,0,10.645-4.766,10.645-10.645s-4.766-10.644-10.645-10.644H99.852 c-5.879,0-10.644,4.766-10.644,10.644S93.973,365.639,99.852,365.639z"}),n.exports.createElement("path",{style:{fill:"#66CBC4"},d:"M99.852,365.639H256V344.35H99.852c-5.879,0-10.644,4.766-10.644,10.644 S93.973,365.639,99.852,365.639z"})),je=({id:o,setIsOpen:p})=>{const a={name:"",type:"",employee:"",supplier:"",paymentDate:"",paymentMethod:"",cost:0,sales:0,profit:0,paidAmount:0,remainingAmount:0},{data:r,isLoading:h,error:f}=ye({id:o}),[l,s]=n.exports.useState(a),[d,{isLoading:g}]=ve(),v=async u=>{var N,C,D;u.preventDefault();const A={id:o,name:l==null?void 0:l.name.trim(),type:(N=l==null?void 0:l.type)==null?void 0:N.trim(),employee:(C=l==null?void 0:l.employee)==null?void 0:C.trim(),supplier:(D=l==null?void 0:l.supplier)==null?void 0:D.trim(),cost:l.cost,sales:l.sales,profit:l.profit,paymentDate:l.paymentDate,paymentMethod:l.paymentMethod,paidAmount:l.paidAmount,remainingAmount:l.remainingAmount};await d(A)};return n.exports.useEffect(()=>{r&&s({name:r==null?void 0:r.customer_name,type:(r==null?void 0:r.type)||"",employee:(r==null?void 0:r.employee)||"",supplier:(r==null?void 0:r.supplier)||"",paymentDate:r!=null&&r.payment_date?q(r==null?void 0:r.payment_date).format("YYYY-MM-DD"):"",paymentMethod:r==null?void 0:r.payment_method,cost:r==null?void 0:r.cost,sales:r==null?void 0:r.sales,profit:r==null?void 0:r.profit,paidAmount:r==null?void 0:r.paid_amount,remainingAmount:r==null?void 0:r.remaining_amount})},[r]),n.exports.useEffect(()=>{const u=window.scrollY;window.scrollBy(0,-u)},[]),f?e(Z,{}):!r||h?e(G,{}):c("div",{className:"fixed inset-0 z-50  h-screen w-full overflow-y-auto overflow-x-hidden bg-black/75 scrollbar-thin scrollbar-track-transparent  scrollbar-thumb-gray-400 scrollbar-track-rounded-full md:inset-0",children:[c(O.button,{...Ae,className:"fixed top-5 right-[5%] inline-flex items-center rounded border border-transparent bg-red-800 px-2  py-2 text-xs font-bold text-white shadow transition-all duration-300 ease-in-out hover:border-red-800\r hover:bg-white hover:text-red-800 sm:px-3 sm:text-sm",onClick:()=>p(!1),type:"button",children:[e($,{className:"mr-1",size:20}),"\u0625\u063A\u0644\u0627\u0642"]}),n.exports.createElement(O.div,{...Ce,key:"modal",className:"mx-auto my-5 w-full max-w-5xl rounded bg-slate-50 p-6 shadow-lg shadow-black/30"},c("h3",{className:"mb-10 flex items-center justify-center rounded bg-red-800 px-2 py-4 text-center text-xl font-bold text-white shadow ",children:[e(fe,{className:"mr-2 h-16 w-16 drop-shadow"}),e("span",{children:"\u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u062A\u0630\u0643\u0631\u0629"})]}),c("form",{onSubmit:v,children:[e("p",{className:"my-4 rounded bg-red-800 p-2 text-lg font-bold text-white",children:"[ \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u062A\u0630\u0643\u0631\u0629 \u0627\u0644\u062D\u0627\u0644\u064A\u0629 ]"}),c("div",{className:"mb-10 flex flex-wrap items-center justify-center gap-4 px-5 py-5 font-semibold",children:[e(w,{label:F[0],name:"customerNameUpdate",labeClassNames:y.default,className:i.default,type:"text",value:l.name,onChange:u=>s({...l,name:u.target.value}),required:!0}),e(w,{label:F[1],name:"typeUpdate",labeClassNames:y.default,className:i.default,type:"text",value:l.type,onChange:u=>s({...l,type:u.target.value})}),e(w,{label:F[2],name:"Update\u0627\u0633\u0645 \u0627\u0644\u0645\u0648\u0638\u0641",labeClassNames:y.default,className:i.default,type:"text",value:l.employee,onChange:u=>s({...l,employee:u.target.value})}),e(w,{label:F[3],name:"cost",labeClassNames:y.default,className:i.default,type:"number",value:l.cost,onChange:u=>s({...l,cost:+u.target.value,sales:0,profit:0}),min:0,step:.01}),e(w,{label:F[4],name:"sales",labeClassNames:y.default,className:i.default,type:"number",value:l.sales,onChange:u=>s({...l,sales:+u.target.value,profit:+u.target.value-l.cost,paidAmount:+u.target.value,remainingAmount:0}),min:0,step:.01}),e(w,{label:F[5],name:"profit",labeClassNames:y.default,className:`${i.default} bg-slate-200`,type:"number",value:l.profit,disabled:!0,min:0,step:.01}),e(w,{label:"Paid Amount",name:"paidAmount",labeClassNames:y.default,className:i.default,type:"number",value:l.paidAmount,onChange:u=>s({...l,paidAmount:+u.target.value,remainingAmount:l.sales-+u.target.value}),min:0,step:.01}),e(w,{label:"Remaining Amount",name:"remainingAmount",labeClassNames:y.default,className:`${i.default} bg-slate-200`,type:"number",value:l.remainingAmount,disabled:!0,min:0,step:.01}),e("select",{name:"paymentMethodUpdate",id:"paymentMethodUpdate",className:i.default,value:l.paymentMethod,onChange:u=>s({...l,paymentMethod:u.target.value}),children:Object.keys(R).map(u=>e("option",{value:u,children:R[u]},u))}),e("label",{htmlFor:"paymentMethodUpdate",className:y.default,children:"Payment Method"}),e(w,{label:F[6],name:"supplierUpdate",labeClassNames:y.default,className:i.default,type:"text",value:l.supplier,onChange:u=>s({...l,supplier:u.target.value})}),e(w,{label:F[7],name:"paymentDate",labeClassNames:y.default,className:i.default,type:"date",value:l.paymentDate,onChange:u=>s({...l,paymentDate:u.target.value})})]}),e(X,{text:{default:"\u062D\u0641\u0638 \u0627\u0644\u062A\u0639\u062F\u064A\u0644\u0627\u062A",loading:"\u062C\u0627\u0631\u0649 \u0627\u0644\u062D\u0641\u0638"},isLoading:g,icon:e(ue,{className:"ml-1",size:25})})]}))]})},_e=({setSearchQuery:o,searchQuery:p,setIsFilterOpen:a,isFilterOpen:r,tableRows:h,setTableRows:f})=>{const[l,s]=T(),d=l.get("page"),{year:g,month:v,day:u,type:A,customerName:N,supplier:C,employee:D,paymentMethod:S}=p;let j=[];for(let t=2010;t<=2060;t++)j.push(t);let B=[];for(let t=1;t<=30;t++)B.push(t);let _=[];for(let t=1;t<=31;t++)_.push(t);let z=[];for(let t=10;t<=300;t+=10)z.push(t);return c("div",{id:"filters",className:`${r?"translate-x-0":"-translate-x-60"} duration-350 absolute left-0 top-0 flex h-screen w-60 flex-wrap items-start justify-center gap-4  overflow-x-hidden overflow-y-scroll bg-slate-50 px-4 py-8 text-xs shadow-md transition-all ease-in-out scrollbar-thin scrollbar-track-transparent scrollbar-thumb-gray-400 scrollbar-corner-slate-700 scrollbar-track-rounded-full scrollbar-w-0`,children:[e("button",{className:"absolute top-2 right-2 inline-flex items-center text-xs font-bold text-white sm:text-sm",onClick:()=>a(!r),type:"button",children:e($,{className:"text-red-700",size:30})}),c("form",{className:"mx-auto my-4  flex basis-full flex-col  items-center justify-center gap-4 font-semibold",children:[c("div",{className:"flex flex-col items-center justify-center gap-2",children:[e("label",{className:"w-full rounded bg-red-700 p-2 text-white",htmlFor:"year",children:"\u0627\u0644\u0633\u0646\u0629"}),c("select",{name:"year",id:"year",className:i.default,value:g,onChange:t=>{d&&+d>1&&s({page:"1"}),o({...p,year:t.target.value})},children:[e("option",{value:"",children:"\u0643\u0644 \u0627\u0644\u0633\u0646\u0648\u0627\u062A"}),j.map(t=>e("option",{value:t,children:t},t))]})]}),c("div",{className:"flex flex-col items-center justify-center gap-2",children:[e("label",{className:"w-full rounded bg-red-700 p-2 text-white",htmlFor:"month",children:"\u0627\u0644\u0634\u0647\u0631"}),c("select",{name:"month",id:"month",className:i.default,value:v,onChange:t=>{d&&+d>1&&s({page:"1"}),o({...p,month:t.target.value})},children:[e("option",{value:"",children:"\u0643\u0644 \u0627\u0644\u0634\u0647\u0648\u0631"}),B.map(t=>e("option",{value:t,children:t},t))]})]}),c("div",{className:"flex flex-col items-center justify-center gap-2",children:[e("label",{className:"w-full rounded bg-red-700 p-2 text-white",htmlFor:"day",children:"\u0627\u0644\u064A\u0648\u0645"}),c("select",{name:"day",id:"day",className:i.default,value:u,onChange:t=>{d&&+d>1&&s({page:"1"}),o({...p,day:t.target.value})},children:[e("option",{value:"",children:"\u0643\u0644 \u0627\u0644\u0627\u064A\u0627\u0645"}),_.map(t=>e("option",{value:t,children:t},t))]})]}),c("div",{className:"flex flex-col items-center justify-center gap-2",children:[e("label",{className:"w-full rounded bg-red-700 p-2 text-white",htmlFor:"tableRows",children:"\u0639\u062F\u062F \u0635\u0641\u0648\u0641 \u0627\u0644\u062C\u062F\u0648\u0644"}),e("select",{name:"tableRows",id:"tableRows",className:i.default,value:h,onChange:t=>{d&&+d>1&&s({page:"1"}),f(+t.target.value)},children:z.map(t=>e("option",{value:t,children:t},t))})]}),c("div",{className:"flex flex-col items-center justify-center gap-2",children:[e("label",{className:"w-full rounded bg-red-700 p-2 text-white",htmlFor:"customerName",children:"\u0627\u0633\u0645 \u0627\u0644\u0639\u0645\u064A\u0644"}),e("input",{type:"text",name:"customerName",id:"customerName",className:i.default,value:N,placeholder:"\u0627\u0633\u0645 \u0627\u0644\u0639\u0645\u064A\u0644",onChange:t=>{d&&+d>1&&s({page:"1"}),o({...p,customerName:t.target.value})}})]}),c("div",{className:"flex flex-col items-center justify-center gap-2",children:[e("label",{className:"w-full rounded bg-red-700 p-2 text-white",htmlFor:"employee",children:"\u0627\u0644\u0645\u0648\u0638\u0641"}),e("input",{type:"text",name:"employee",id:"employee",className:i.default,value:D,placeholder:"\u0627\u0644\u0645\u0648\u0638\u0641",onChange:t=>{d&&+d>1&&s({page:"1"}),o({...p,employee:t.target.value})}})]}),c("div",{className:"flex flex-col items-center justify-center gap-2",children:[e("label",{className:"w-full rounded bg-red-700 p-2 text-white",htmlFor:"supplier",children:"Supplier"}),e("input",{type:"text",name:"supplier",id:"supplier",className:i.default,value:C,placeholder:"Supplier",onChange:t=>{d&&+d>1&&s({page:"1"}),o({...p,supplier:t.target.value})}})]}),c("div",{className:"flex flex-col items-center justify-center gap-2",children:[e("label",{className:"w-full rounded bg-red-700 p-2 text-white",htmlFor:"type",children:"Type"}),e("input",{type:"text",name:"type",id:"type",className:i.default,value:A,placeholder:"Type",onChange:t=>{d&&+d>1&&s({page:"1"}),o({...p,type:t.target.value})}})]}),c("div",{className:"flex basis-full flex-col items-center justify-center gap-2",children:[e("p",{className:"w-full rounded bg-red-700 p-2 text-white",children:"Payment Method"}),e("div",{className:"flex flex-row-reverse flex-wrap items-center justify-center gap-2",children:S==null?void 0:S.map((t,U)=>c(n.exports.Fragment,{children:[e("label",{htmlFor:t.value,children:R[t.value]}),e("input",{type:"checkbox",id:t.value,name:t.value,value:t.value,checked:t.checked,onChange:()=>{d&&+d>1&&s({page:"1"}),o({...p,paymentMethod:S.map((x,H)=>({value:x.value,checked:U===H?!x.checked:x.checked}))})}})]},t.value))})]})]})]})},ze=({searchQuery:o,paymentMethodArr:p,count:a,setIsFilterOpen:r,isFilterOpen:h})=>{const{year:f,month:l,day:s,type:d,customerName:g,employee:v,supplier:u,paymentMethod:A}=o;return c("h3",{id:"filterHeader",className:"relative flex basis-full flex-row-reverse flex-wrap items-center justify-center rounded  bg-red-700 p-3 text-center font-bold text-white shadow",children:[c("button",{id:"openFilters",className:"absolute top-2 right-2 flex items-center justify-center rounded bg-slate-50 p-2 text-xs font-semibold text-gray-600 shadow sm:text-sm",onClick:()=>r(!h),type:"button",children:[e(ne,{className:"mr-1",size:25}),h?"\u0625\u063A\u0644\u0627\u0642 \u0627\u0644\u0641\u0644\u062A\u0631\u0629":"\u0641\u062A\u062D \u0627\u0644\u0641\u0644\u062A\u0631\u0629"]}),e("p",{className:"mb-5 basis-full text-2xl underline decoration-sky-500 decoration-wavy decoration-2 underline-offset-8",children:"\u0641\u0644\u062A\u0640\u0640\u0631\u0629 \u0627\u0644\u062A\u0630\u0627\u0643\u0640\u0640\u0631"}),e("span",{children:" \u0627\u0644\u062A\u0630\u0627\u0643\u0640\u0640\u0631 \u0627\u0644\u0645\u062D\u0641\u0648\u0638\u0629"}),!l&&!f&&e("span",{className:"mx-1 rounded-md bg-blue-500 p-1 text-white",children:" \u0627\u0644\u0643\u0644\u064A\u0629 "}),l&&e("span",{className:"mx-1 rounded-md bg-rose-500 p-1 text-white",children:" \u0639\u0646 \u0634\u0647\u0631 "+l}),s&&e("span",{className:"mx-1 rounded-md bg-rose-500 p-1 text-white",children:" \u064A\u0648\u0645 "+s}),f&&e("span",{className:"mx-1 rounded-md bg-amber-500 p-1 text-white",children:" \u0633\u0646\u0629 "+f}),g&&e("span",{className:"mx-1 rounded-md bg-purple-500 p-1 text-white",children:" Customer Name:- "+g}),v&&e("span",{className:"mx-1 rounded-md bg-emerald-500 p-1 text-white",children:"\u0627\u0644\u0645\u0648\u0638\u0641:- "+v}),u&&e("span",{className:"mx-1 rounded-md bg-pink-500 p-1 text-white",children:" Supplier:- "+u}),d&&e("span",{className:"mx-1 rounded-md bg-pink-500 p-1 text-white",children:" Type:- "+d}),A&&e("span",{className:"mx-1 rounded-md bg-emerald-500 p-1 text-white",children:" Payment Method:- "+(p.join()===""?" [All Methods] ":p.map(N=>` ${R[N]} `))}),c("span",{children:["(",a,")"]})]})},He=o=>{let p={costs:0,sales:0,profits:0};return o.map(a=>{p.sales+=(a==null?void 0:a.sales)||0,p.costs+=(a==null?void 0:a.cost)||0,p.profits+=(a==null?void 0:a.profit)||0}),p},Be=["\u0627\u0644\u0642\u064A\u0645\u0629","\u0627\u0644\u0625\u062C\u0645\u0627\u0644\u0649"],Ue=({tickets:o})=>{const{costs:p,profits:a,sales:r}=He(o),h=[["\u062A\u0643\u0644\u0641\u0629 \u0627\u0644\u062A\u0630\u0627\u0643\u0631",p.toFixed(2)],["\u0633\u0639\u0631 \u0627\u0644\u0628\u064A\u0639",r.toFixed(2)],["\u0627\u0644\u0631\u0628\u062D",a.toFixed(2)]],f=e("tr",{className:"border-b border-b-teal-500",children:Be.map(s=>e("th",{scope:"col",className:"border-x border-x-teal-500 py-3 px-3 text-center",children:s},s))}),l=(s,d)=>c("tr",{className:`${d%2===0?"bg-white":"bg-red-100"} border-b border-b-teal-500`,children:[e("th",{scope:"row",className:"whitespace-nowrap  border-x border-x-teal-500  p-2  text-center text-gray-900",children:s[1]}),e("th",{scope:"row",className:"whitespace-nowrap  border-x border-x-teal-500  p-2  text-center text-gray-900",children:s[0]})]},s[0]);return c("div",{className:"my-5 rounded-md bg-red-700 p-4 ",children:[e("h4",{className:"mb-5 p-3 text-center text-2xl font-bold text-white underline decoration-sky-500 decoration-wavy decoration-2 underline-offset-8",children:"\u0625\u062C\u0645\u0627\u0644\u064A\u0627\u062A \u0627\u0644\u0635\u0641\u062D\u0629"}),e("div",{className:"my-5  rounded",children:c("table",{className:"w-full text-sm font-bold text-gray-500 ",children:[e("thead",{className:"bg-red-100 uppercase text-gray-900",children:f}),e("tbody",{children:h.map((s,d)=>l(s,d))})]})})]})},Le=c("tr",{className:"border-y border-y-black",children:[[...F].slice(6).reverse().map(o=>e("th",{scope:"col",className:"max-w-[100px] border-x border-x-black p-1 text-center",children:o},o)),[...Fe].map(o=>e("th",{scope:"col",className:"max-w-[100px] border-x border-x-black p-1 text-center",children:o},o)),[...F].slice(0,6).reverse().map(o=>e("th",{scope:"col",className:"max-w-[100px] border-x border-x-black p-1 text-center",children:o},o)),e("th",{scope:"col",className:"border-x border-x-black p-1 text-center",children:"\u0631\u0642\u0645 \u0627\u0644\u0641\u0627\u062A\u0648\u0631\u0629"}),e("th",{scope:"col",className:"border-x border-x-black p-1 text-center",children:"\u0645"})]}),Pe=({basicOptions:o,extraOptions:p})=>{const{item:a,index:r,tableBodyData:h}=o,{handleRemoving:f,isDeleting:l,setId:s,setIsOpen:d}=p;return c("tr",{className:`${r%2===0?"bg-white":"bg-gray-100"} border-b border-b-black`,children:[e("th",{scope:"row",className:"border-x border-x-black p-1 text-center text-gray-900",children:e("form",{className:"m-auto max-w-[150px]",onSubmit:g=>f(g,a==null?void 0:a.id),children:e(X,{bgColor:["bg-red-600","bg-red-700","bg-red-800"],icon:e(Se,{size:20}),isLoading:l})})}),e("th",{scope:"row",className:"border-x border-x-black p-1 text-center text-gray-900",children:e("button",{className:"flex w-full items-center justify-center rounded border border-transparent bg-blue-800 px-3 py-2.5 text-xs font-bold text-white transition-all duration-300 ease-in-out\r hover:border-blue-800 hover:bg-white hover:text-blue-800",onClick:()=>{s==null||s(a==null?void 0:a.id),d==null||d(!0)},children:e(oe,{size:20})})}),e("th",{scope:"row",className:"border-x  border-x-black p-1 text-center text-gray-900",children:a!=null&&a.payment_date?q(a==null?void 0:a.payment_date).format("DD/MM/YYYY"):"-"}),e("th",{scope:"row",className:"border-x  border-x-black  p-1 text-center text-gray-900",children:a!=null&&a.supplier?a==null?void 0:a.supplier:"-"}),e("th",{scope:"row",className:"border-x  border-x-black  p-1 text-center text-gray-900",children:a==null?void 0:a.paid_amount}),e("th",{scope:"row",className:"border-x  border-x-black  p-1 text-center text-gray-900",children:a==null?void 0:a.remaining_amount}),e("th",{scope:"row",className:"border-x  border-x-black  p-1 text-center text-gray-900",children:a!=null&&a.payment_method?R[a==null?void 0:a.payment_method]:"-"}),e("th",{scope:"row",className:"border-x  border-x-black  p-1 text-center text-gray-900",children:a==null?void 0:a.profit}),e("th",{scope:"row",className:"border-x  border-x-black  p-1 text-center text-gray-900",children:a==null?void 0:a.sales}),e("th",{scope:"row",className:"border-x  border-x-black  p-1 text-center text-gray-900",children:a==null?void 0:a.cost}),e("th",{scope:"row",className:"border-x  border-x-black  p-1 text-center text-gray-900",children:a!=null&&a.employee?a.employee:"-"}),e("th",{scope:"row",className:"border-x  border-x-black  p-1 text-center text-gray-900",children:a!=null&&a.type?a.type:"-"}),e("th",{scope:"row",className:"border-x  border-x-black bg-red-200 p-1 text-center text-gray-900",children:a!=null&&a.customer_name?a.customer_name:"-"}),e("th",{scope:"row",className:"border-x  border-x-black bg-green-200 p-1 text-center text-gray-900",children:(a==null?void 0:a.bill_id)||"-"}),e("th",{scope:"row",className:"text-gray-90  border-x border-x-black p-1 text-center",children:h.findIndex(g=>g.id===(a==null?void 0:a.id))+1})]},a==null?void 0:a.id)};function ea(){const[o,p]=n.exports.useState({day:"",year:"",month:"",type:"",supplier:"",employee:"",customerName:"",paymentMethod:[{value:"cash",checked:!1},{value:"bank",checked:!1},{value:"later",checked:!1},{value:"credit",checked:!1}]}),{year:a,month:r,day:h,supplier:f,employee:l,paymentMethod:s,type:d,customerName:g}=o,v=n.exports.useDeferredValue(g),u=n.exports.useDeferredValue(l),A=n.exports.useDeferredValue(d),N=n.exports.useDeferredValue(f),C=n.exports.useRef(!1),D=n.exports.useRef(null),{onDownload:S}=me.useDownloadExcel({currentTableRef:D.current,filename:"Tickets table",sheet:"Tickets"}),[j,B]=n.exports.useState(50),[_]=T(),z=_.get("page")?+_.get("page"):1,t=s.filter(E=>E.checked).map(E=>E.value);let U={query:{day:+h,month:+r,year:+a,type:A,supplier:N,employee:u,customerName:v,paymentMethod:t},option:{limit:j,page:z}};const{data:x,isLoading:H,isFetching:M,isSuccess:Y,error:J}=Ne(U),b=x!=null&&x.docs?x.docs:[],[K,{isLoading:W}]=we(),[Q,{isLoading:k}]=Me(),[ee,I]=n.exports.useState(!1),[L,P]=n.exports.useState(!1),[ae,te]=n.exports.useState(""),le=n.exports.useCallback(async(E,m)=>{E.preventDefault(),await K(m)},[]),re=n.exports.useCallback(async(E,m)=>{E.preventDefault();const se={customer:{name:m==null?void 0:m.customer_name},details:[{name:m==null?void 0:m.type,quantity:1,price:m.sales}],subtotal:m==null?void 0:m.sales,taxable:0,taxRate:0,taxDue:0,total:m==null?void 0:m.sales,date:m==null?void 0:m.payment_date,paidAmount:m==null?void 0:m.paid_amount,remainingAmount:m==null?void 0:m.remaining_amount,paymentMethod:R[m==null?void 0:m.payment_method]};await Q(se)},[]);return n.exports.useEffect(()=>{C.current&&Y&&!M&&!H?V():C.current=!0},[z,Y,M,H,V]),Ee("filterHeader"),ge("\u0627\u0644\u062A\u0630\u0627\u0643\u0640\u0640\u0631"),pe({setIsFilterOpen:P,isFilterOpen:L}),J?e(Z,{}):!x||H?e(G,{}):c("main",{className:"w-full",children:[c("h2",{className:"my-4 mb-10 flex items-center justify-center rounded bg-red-700 px-2 py-4 text-3xl font-bold text-white shadow",children:[e("span",{className:"mr-2 flex items-center justify-center",children:e(Re,{className:"mr-1 h-20 w-20 drop-shadow"})}),"\u0627\u0644\u062A\u0630\u0627\u0643\u0640\u0640\u0631"]}),e(ze,{searchQuery:o,count:x!=null&&x.totalDocs?x.totalDocs:0,paymentMethodArr:t,setIsFilterOpen:P,isFilterOpen:L}),e(_e,{searchQuery:o,setSearchQuery:p,paymentMethodArr:t,setIsFilterOpen:P,isFilterOpen:L,tableRows:j,setTableRows:B}),!M&&(b==null?void 0:b.length)!==0&&e(Ue,{tickets:b}),M&&e(ie,{isFetching:M}),(b==null?void 0:b.length)>0&&c(de,{children:[c("button",{className:"mx-auto my-5 flex items-center justify-center gap-1 rounded border bg-green-200 px-2 py-2 text-xs font-bold text-green-800 shadow transition-all duration-300 ease-in-out hover:border-green-800 hover:bg-white\r hover:text-green-800 sm:px-3 sm:text-sm",onClick:S,children:[e(ce,{size:20}),e("span",{children:"Export excel"})]}),e(he,{tableRow:Pe,tableHeader:Le,tableBodyData:b,options:x,handleRemoving:le,handleAddInvoice:re,setIsOpen:I,setId:te,isDeleting:W,isCreatingInvoice:k,ref:D})]}),!a&&!r&&!h&&!A&&!N&&!u&&!v&&(t==null?void 0:t.length)===0&&(b==null?void 0:b.length)===0&&!M&&e(xe,{customMsg:["\u062A\u0630\u0627\u0643\u0631","\u0627\u0644\u062A\u0630\u0627\u0643\u0631"]}),(a||r||h||l||N||v||A||u||(t==null?void 0:t.length)>0)&&(b==null?void 0:b.length)===0&&!M&&e(be,{}),e(De,{initial:!1,children:ee&&e(je,{setIsOpen:I,id:ae})})]})}export{ea as default};
